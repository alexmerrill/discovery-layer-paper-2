---
title: "R Notebook"
output: html_notebook
---

This is an [R Markdown](http://rmarkdown.rstudio.com) Notebook. When you execute code within the notebook, the results appear beneath the code. 

Try executing this chunk by clicking the *Run* button within the chunk or by placing your cursor inside it and pressing *Ctrl+Shift+Enter*. 


```{r}
#searchit_titles=read.csv("D:/Rstudio projects/tidy_string_distance/Fall_2020/Normalized/papertitles-searchit-fall2020-articlesonly-oneobsperrow.csv")
searchit_titles=read.csv("D:/Rstudio projects/tidy_string_distance/Spring_2021/Normalized/paperTitles-inSearchItYes-Spri2021-noRefnoNewsnoReview-oneObsPerRow-normalized.csv")
matrixsearchit_titles=as.matrix(searchit_titles)
#vectorsearchit_titles=as.vector(searchit_titles)


#source_titles=read.csv("D:/Rstudio projects/tidy_string_distance/Fall_2020/Normalized/fall-2020-paper-citations.csv")
source_titles=read.csv("D:/Rstudio projects/tidy_string_distance/Spring_2021/Normalized/spring-2021-paper-citations-normalized.csv")
matrix_source_title=as.matrix(source_titles)
#vectorpapers_info_test=as.vector(source_titles)

```




```{r}
n <- 1
i <- 1
b <- 1
matches <- 1
matches <- data.frame(matrix(ncol = 9, nrow = 0))
colnames(matches) <- c("Paper title","Biblography title","Bibliography Type","Query","Search It Title","Search It Type","Jaccard Score", "JW","LV")
while (n  < 464  ) {
#n should be the number of source citations to check (citations from papers, for spring 21 citation count is 463) 
#b should be the whole number of titles returned from queries to check  (titles returned from discovery layer to compare against. for spring 2021 this will be different based on the facets and the queries....4273.)
while (b < 4546) {
 #the column placement of the paper title/query in matrixsearchit_titles changes depending on the semester files being run fall2020 it is  matrixsearchit_titles[b,2] spring 2021 it is  matrixsearchit_titles[b,1] .. also means we need to slide the stringdist comparators down one from tolower(matrixsearchit_titles[b,4] to tolower(matrixsearchit_titles[b,3]
  if(matrix_source_title[i,2] == matrixsearchit_titles[b,1])
    {new_row <-  c(matrix_source_title[i,2],matrix_source_title[i,4],matrix_source_title[i,6],matrixsearchit_titles[b,1],matrixsearchit_titles[b,3],matrixsearchit_titles[b,4],stringdist(tolower(matrix_source_title[i,4]),tolower(matrixsearchit_titles[b,3]), method = "jaccard", q = "7"),stringdist(tolower(matrix_source_title[i,4]),tolower(matrixsearchit_titles[b,3]), method = "jw"),stringdist(tolower(matrix_source_title[i,4]),tolower(matrixsearchit_titles[b,3]), method = "jw", p ="0"))
    b = b + 1
  matches[nrow(matches) + 1,] <- new_row
  }
  else {b = b+1}
   
 }
  i = i +1
  n <- i
  b <- 1
  
  
}
```
```{r}

#write.csv(jaccard,"D:\\Rstudio projects\\tidy_string_distance\\fall2020_nonews_norefs_neweval.csv")
write.csv(matches,"D:\\Rstudio projects\\tidy_string_distance\\Spring_2021\\Normalized\\Spring2021_noNewsnoRefsnoReviews_normalized_JW2_matches.csv")

```

Add a new chunk by clicking the *Insert Chunk* button on the toolbar or by pressing *Ctrl+Alt+I*.

When you save the notebook, an HTML file containing the code and output will be saved alongside it (click the *Preview* button or press *Ctrl+Shift+K* to preview the HTML file).

The preview shows you a rendered HTML copy of the contents of the editor. Consequently, unlike *Knit*, *Preview* does not run any R code chunks. Instead, the output of the chunk when it was last run in the editor is displayed.
